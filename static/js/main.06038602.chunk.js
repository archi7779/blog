(this["webpackJsonpblock-21"]=this["webpackJsonpblock-21"]||[]).push([[0],{229:function(e,t,a){e.exports=a(441)},237:function(e,t,a){},441:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o=a(0),l=a.n(o),s=a(38),u=a.n(s),m=a(15),p=a(52),d=a(213),b=(a(237),a(149)),h=a(62),g=a(20),E=a(446),f=a(110),v=a(12),O=a.n(v),j=a(448),k=a(41),y=a.n(k),S=Object(j.a)("LOG_OUT"),x=Object(j.a)("USER_INFO_FROM_SERVER"),w=Object(j.a)("NET_ERR_TO_STATE"),T=Object(j.a)("SET_START_PAGING"),N=Object(j.a)("LOG_IN_REQUEST"),C=Object(j.a)("LOG_IN_SUCCESS"),A=Object(j.a)("LOG_IN_FAILURE"),L=Object(j.a)("REGISTRATION_IN_REQUEST"),R=Object(j.a)("REGISTRATION_SUCCESS"),I=Object(j.a)("REGISTRATION_FAILURE"),_=(Object(j.a)("GET_ARTICLES_FROM_SERVER"),Object(j.a)("GET_ARTICLES_FROM_SERVER")),P=Object(j.a)("UPDATE_POST_LIKE_STATUS"),q=function(e,t,a){return function(n){var r,c,i,o,l;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(r={headers:{Authorization:"Token ".concat(t)}},a){s.next=16;break}return s.prev=2,s.next=5,O.a.awrap(y.a.post("https://conduit.productionready.io/api/articles/".concat(e,"/favorite"),"",r));case 5:c=s.sent,i=c.data,n(P(i)),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(2),console.log(s.t0),s.t0.response.status&&alert("u need to login first");case 14:s.next=28;break;case 16:return s.prev=16,s.next=19,O.a.awrap(y.a.delete("https://conduit.productionready.io/api/articles/".concat(e,"/favorite"),r));case 19:o=s.sent,l=o.data,n(P(l)),s.next=28;break;case 24:s.prev=24,s.t1=s.catch(16),console.log(s.t1),s.t1.response.status&&alert("u need to login first");case 28:case"end":return s.stop()}}),null,null,[[2,10],[16,24]])}},F=Object(E.a)((n={},Object(g.a)(n,N,(function(){return"requested"})),Object(g.a)(n,A,(function(){return"failed"})),Object(g.a)(n,C,(function(){return"finished"})),n),"none"),U=Object(E.a)((r={},Object(g.a)(r,L,(function(){return"requested"})),Object(g.a)(r,I,(function(){return"failed"})),Object(g.a)(r,R,(function(){return"finished"})),r),"none"),M=Object(E.a)((c={},Object(g.a)(c,x,(function(e,t){var a=t.payload;return Object(h.a)({},a.user)})),Object(g.a)(c,S,(function(){return{}})),c),{}),G=Object(E.a)((i={},Object(g.a)(i,_,(function(e,t){var a=t.payload.data.articles;return Object(b.a)(a)})),Object(g.a)(i,P,(function(e,t){var a=t.payload.article,n=e.map((function(e){return e.slug===a.slug?a:e}));return Object(b.a)(n)})),i),[]),B=Object(E.a)(Object(g.a)({},T,(function(e,t){return t.payload||1})),1),z=Object(E.a)(Object(g.a)({},w,(function(e,t){var a=t.payload.data;return Object(h.a)({},a.errors)})),{}),V=Object(p.c)({user:M,loginState:F,registrationState:U,netError:z,articles:G,page:B}),D=a(40),J=a(23),Q=a(28),$=a(29),K=a(32),H=a(30),W=a(33),X=a(17),Y=a(447),Z=a(150),ee=a(24),te={doLogin:function(e){return function(t){var a;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(N()),n.prev=1,n.next=4,O.a.awrap(y.a.post("https://conduit.productionready.io/api/users/login",{user:e}));case 4:a=n.sent,t(C()),t(x(a.data)),document.cookie="authToken=".concat(a.data.user.token,"; path=/; max-age=86400; secure "),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),t(w(n.t0.response)),t(A());case 14:case"end":return n.stop()}}),null,null,[[1,10]])}}},ae=ee.object({email:ee.string().email().required("Please Enter your Email"),password:ee.string().required("Please Enter your password")}),ne=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.login,a=e.netError,n=e.doLogin;return l.a.createElement(X.d,{validateOnChange:!0,initialValues:{password:"",email:""},validationSchema:ae,onSubmit:function(e,t){var a=t.setSubmitting;a(!0),n(e),a(!1)}},(function(e){var n=e.errors;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.c,{className:"loginForm"},l.a.createElement(X.a,{name:"email",type:"input",as:Y.a,placeholder:"enter ur email",disabled:"requested"===t,className:n.email||Object.entries(a).length>0?"error":""}),n.email&&l.a.createElement("div",null,n.email),l.a.createElement(X.a,{name:"password",type:"password",as:Y.a,placeholder:"enter ur password",disabled:"requested"===t,className:n.password||Object.entries(a).length>0?"error":""}),n.password&&l.a.createElement("div",null,n.password),Object.entries(a).length>0&&l.a.createElement("div",null,"Email or Password incorrect"),l.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:"requested"===t,className:"subBut"},"Submit")))}))}}]),t}(l.a.Component),re=Object(m.b)((function(e){return{user:e.user,login:e.loginState,netError:e.netError}}),te)(ne),ce={doRegistration:function(e){return function(t){var a;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(L()),n.prev=1,n.next=4,O.a.awrap(y.a.post(" https://conduit.productionready.io/api/users",{user:e}));case 4:a=n.sent,t(R()),t(x(a.data)),document.cookie="authToken=".concat(a.data.user.token,"; path=/; max-age=86400; secure;"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),t(w(n.t0.response)),t(I());case 14:case"end":return n.stop()}}),null,null,[[1,10]])}}},ie=ee.object({username:ee.string().required().max(50),email:ee.string().email().required("Please Enter your Email"),password:ee.string().required("Please Enter your password")}),oe=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.doRegistration,a=e.registrationStatus,n=e.netError;return l.a.createElement(X.d,{validateOnChange:!0,initialValues:{username:"",email:"",password:""},validationSchema:ie,onSubmit:function(e,a){var n=a.setSubmitting;n(!0),t(e),n(!1)}},(function(e){var t=e.errors;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.c,{className:"loginForm"},l.a.createElement(X.a,{name:"username",type:"input",as:Y.a,placeholder:"enter ur login",disabled:"requested"===a,className:t.username||n.username?"error":""}),n.username&&l.a.createElement("div",null,n.username),t.username&&l.a.createElement("div",null,t.username),l.a.createElement(X.a,{name:"email",type:"input",as:Y.a,placeholder:"enter ur email",disabled:"requested"===a,className:t.email||n.email?"error":""}),n.email&&l.a.createElement("div",null,n.email),t.email&&l.a.createElement("div",null,t.email),l.a.createElement(X.a,{name:"password",type:"password",as:Y.a,placeholder:"enter ur password",disabled:"requested"===a,className:t.password||n.password?"error":""}),n.password&&n.password.map((function(e){return l.a.createElement("div",null,e)})),t.password&&l.a.createElement("div",null,t.password),l.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:"requested"===a,className:"subBut"},"Submit")))}))}}]),t}(l.a.Component),le=Object(m.b)((function(e){return{user:e.user,registrationStatus:e.registrationState,netError:e.netError}}),ce)(oe),se=a(443),ue=a(44),me=a(64),pe=a(65),de=a(444);function be(){var e=Object(me.a)(["\n  width: 500px;\n"]);return be=function(){return e},e}function he(){var e=Object(me.a)(["\n  width: 20px;\n  height: 35px;\n"]);return he=function(){return e},e}function ge(){var e=Object(me.a)([""]);return ge=function(){return e},e}function Ee(){var e=Object(me.a)([""]);return Ee=function(){return e},e}function fe(){var e=Object(me.a)([""]);return fe=function(){return e},e}function ve(){var e=Object(me.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: center;\n  background-color: #e5e5e5;\n  margin-top: 50px;\n  width: 500px;\n  cursor: pointer;\n"]);return ve=function(){return e},e}var Oe=pe.a.div(ve()),je=(pe.a.div(fe()),pe.a.div(Ee()),pe.a.div(ge()),pe.a.img(he()),Object(pe.a)(de.a)(be()));function ke(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}function ye(e){!function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=Object(h.a)({path:"/"},a);var n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in a){n+="; "+r;var c=a[r];!0!==c&&(n+="="+c)}document.cookie=n}(e,"",{"max-age":-1})}var Se=a(445),xe=a(14),we={handleLike:q},Te=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t,n){return function(r){r.stopPropagation(),(0,a.props.handleLike)(e,t,n)}},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,a=t.title,n=t.author,r=t.createdAt,c=t.favorited,i=t.favoritesCount,o=t.tagList,s=t.slug,u=t.body,m=e.token,p=Object(Se.a)(new Date(r),{includeSeconds:!0,addSuffix:!0});return l.a.createElement(je,{size:"small",title:a,extra:l.a.createElement("span",null,"created ",p)},l.a.createElement("div",{className:"ArticleMainSection"},l.a.createElement("span",{className:"ArticleMainSection-useProfile-userName"}," ",n.username),l.a.createElement("img",{src:n.image,alt:"userPhoto",className:"ArticleMainSection-useProfile-Img"}),l.a.createElement("p",{className:"Article-Body"},u)),l.a.createElement("div",{className:"ArticleLikeSection",onClick:this.handleClick(s,m,c)},c?l.a.createElement("label",{htmlFor:"imgTest"}," ",l.a.createElement(xe.a,{type:"heart",theme:"filled"}),i):l.a.createElement("label",{htmlFor:"imgTest2"}," ",l.a.createElement(xe.a,{type:"heart"}),i)),l.a.createElement("div",{className:"ArticleTagsSection"},o.map((function(e){return l.a.createElement("span",{key:Object(ue.uniqueId)()}," #",e)}))))}}]),t}(l.a.Component);Te.defaultProps={token:"optional"};var Ne=Object(m.b)((function(){return{}}),we)(Te),Ce={logOut:S,getArticles:function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return function(e){var t,r,c,i,o,l;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e(1===n?T():T(n)),10,t=1===n?"":"offset=".concat(10*(n-1)),r="?limit=".concat(10,"&").concat(t),c="https://conduit.productionready.io/api/articles".concat(r),"optional"!==a){s.next=18;break}return s.prev=6,s.next=9,O.a.awrap(y.a.get(c));case 9:return i=s.sent,e(_(i)),s.abrupt("return");case 14:return s.prev=14,s.t0=s.catch(6),console.log(s.t0),s.abrupt("return");case 18:return o={headers:{Authorization:"Token ".concat(a)}},s.prev=19,s.next=22,O.a.awrap(y.a.get(c,o));case 22:l=s.sent,e(_(l)),s.next=29;break;case 26:s.prev=26,s.t1=s.catch(19),console.log(s.t1);case 29:case"end":return s.stop()}}),null,null,[[6,14],[19,26]])}},cookieLogin:function(e){return function(t){var a,n;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t(N()),r.prev=1,a={headers:{Authorization:"Token ".concat(e)}},r.next=5,O.a.awrap(y.a.get("https://conduit.productionready.io/api/user",a));case 5:n=r.sent,t(C()),t(x(n.data)),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0),t(w(r.t0.response)),t(A());case 15:case"end":return r.stop()}}),null,null,[[1,10]])}}},Ae=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){var e=a.props,t=e.logOut;e.user.token;ye("authToken"),t()},a.hanglePrevClick=function(){var e=a.props,t=e.user.token,n=e.page,r=e.getArticles;1!==n&&r([t||"optional",n-1])},a.hangleNextClick=function(){var e=a.props,t=e.user.token,n=e.page;(0,e.getArticles)([t||"optional",n+1])},a.handleClick=function(e){var t=a.props.history,n="/articles/".concat(e.slug);t.push({pathname:n,state:e})},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user.token,a=e.page,n=e.getArticles,r=e.authToken;(0,e.cookieLogin)(r),n([t||"optional",a])}},{key:"render",value:function(){var e=this,t=this.props,a=t.articles,n=t.user,r=t.page;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"mainPage"},l.a.createElement("div",null,n.username&&l.a.createElement("div",{className:"logInIndicator"},"u logged as ",n.username),l.a.createElement(Z.a,{type:"primary",onClick:this.hanglePrevClick,className:"MainPage-Prev-Button"},"Prev"),l.a.createElement("span",null,r),l.a.createElement(Z.a,{type:"primary",onClick:this.hangleNextClick,className:"MainPage-Next-Button"},"Next"),l.a.createElement(Z.a,{type:"primary",onClick:this.handleLogOut,className:"logOut"},"LogOut")),!a.length>0&&l.a.createElement(se.a,null),a.map((function(t){return l.a.createElement(Oe,{key:Object(ue.uniqueId)(),onClick:function(){e.handleClick(t)}},l.a.createElement(Ne,{article:t,token:n.token}))}))))}}]),t}(l.a.Component);Ae.defaultProps={page:1,authToken:ke("authToken")?ke("authToken"):null};var Le=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles,page:e.page}}),Ce)(Ae));function Re(e){var t=Object(X.e)(e),a=Object(f.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Y.a,Object.assign({},n,e)),r.error&&r.touched&&l.a.createElement("div",null,r.error))}var Ie=ee.object().shape({title:ee.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),description:ee.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),body:ee.string().required("Required")}),_e={handleLike:q},Pe=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user.token,n=t.location.state;return l.a.createElement(X.d,{validateOnChange:!0,initialValues:{title:n?n.title:"",description:n?n.description:"",body:n?n.body:"",tagList:n?n.tagList:[]},validationSchema:Ie,onSubmit:function(t,n){var r=n.setSubmitting;r(!0);!function(){var n,r,c,i,o,l;O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=Object(ue.compact)(t.tagList),r=Object(h.a)({},t,{tagList:n}),c=e.props.history,i={headers:{Authorization:"Token ".concat(a)}},s.prev=4,s.next=7,O.a.awrap(y.a.post("https://conduit.productionready.io/api/articles",{article:r},i));case 7:o=s.sent,l="/articles/".concat(o.data.article.slug),c.push({pathname:l,state:o.data.article}),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(4),console.log(s.t0);case 15:case"end":return s.stop()}}),null,null,[[4,12]])}(),r(!1)}},(function(e){var t=e.values,a=e.isSubmitting;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.c,{className:"loginForm"},l.a.createElement(Re,{name:"title",placeholder:"enter article's title"}),l.a.createElement(Re,{name:"description",placeholder:"enter article's description"}),l.a.createElement(Re,{name:"body",placeholder:"enter article's body"}),l.a.createElement(X.b,{name:"tagList"},(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Re,{name:"tagList[0]",placeholder:"enter hashTag",key:0}),t.tagList.slice(1).map((function(e,t){return l.a.createElement(Re,{name:"tagList[".concat(t+1,"]"),placeholder:"enter hashTag",key:t})})),l.a.createElement(Z.a,{type:"primary",htmlType:"button",disabled:a,onClick:function(){return t.tagList[0]&&e.push()},className:"CreateNewArticle-addNewArticle-Button"},"add another hashTag"))})),l.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:a,className:"CreateNewArticle-Submit-Button"},"Submit")))}))}}]),t}(l.a.Component);Pe.defaultProps={location:null};var qe=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles}}),_e)(Pe)),Fe={handleLike:q},Ue=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t,n){return function(r){var c,i,o,l,s,u,m;return O.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r.stopPropagation(),c=a.props,i=c.handleLike,o=c.history,l=c.location.state,s=c.articles,p.next=4,O.a.awrap(i(e,t,n));case 4:u="/articles/".concat(l.slug),m=Object(ue.findIndex)(s,(function(t){return t.slug===e})),o.replace({pathname:u,state:s[m]});case 7:case"end":return p.stop()}}))}},a.handleEditClick=function(){var e=a.props,t=e.location.state,n=e.history,r="/articles/".concat(t.slug,"/edit");n.push({pathname:r,state:t})},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location.state,a=e.user,n=a.token,r=a.username,c=t.author.username,i=Object(Se.a)(new Date(t.createdAt),{includeSeconds:!0,addSuffix:!0});return l.a.createElement(je,{size:"small",title:t.title,extra:l.a.createElement("span",null,"created ",i)},l.a.createElement("div",{className:"ArticleMainSection"},l.a.createElement("img",{src:t.author.image,alt:"userPhoto",className:"ArticleMainSection-useProfile-Img"}),l.a.createElement("p",null,"author:",t.author.username),l.a.createElement("p",null,t.body)),l.a.createElement("div",{className:"ArticleLikeSection",onClick:this.handleClick(t.slug,n,t.favorited)},t.favorited?l.a.createElement("label",{htmlFor:"imgLike"}," ",l.a.createElement(xe.a,{type:"heart",theme:"filled"}),t.favoritesCount):l.a.createElement("label",{htmlFor:"imgLike2"}," ",l.a.createElement(xe.a,{type:"heart"}),t.favoritesCount)),l.a.createElement("div",{className:"ArticleTagsSection"},t.tagList.map((function(e){return l.a.createElement("span",{key:Object(ue.uniqueId)()}," #",e," ")}))),r===c&&l.a.createElement(Z.a,{onClick:this.handleEditClick},"edit"))}}]),t}(l.a.Component),Me=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles}}),Fe)(Ue));var Ge=function(){return l.a.createElement("ul",{className:"nav"},l.a.createElement("li",null,l.a.createElement(D.b,{to:"/login"},"Login")),l.a.createElement("li",null,l.a.createElement(D.b,{to:"/registration"},"Registration")),l.a.createElement("li",null,l.a.createElement(D.b,{to:"/"},"MainPage")),l.a.createElement("li",null,l.a.createElement(D.b,{to:"/add"},"Add Post")))},Be=(a(440),ke("authToken"));var ze=Object(m.b)((function(e){return{user:e.user}}))((function(e){var t=e.user;return l.a.createElement(D.a,{basename:"/blog/"},l.a.createElement("div",{className:"App"},l.a.createElement(Ge,null),l.a.createElement(J.b,{exact:!0,path:"/login"},Object.keys(t).length>0||Be?l.a.createElement(J.a,{to:"/"}):l.a.createElement(re,null)),l.a.createElement(J.b,{exact:!0,path:"/registration"},Object.keys(t).length>0||Be?l.a.createElement(J.a,{to:"/"}):l.a.createElement(le,null)),l.a.createElement(J.b,{exact:!0,path:"/"},l.a.createElement(Le,null)),l.a.createElement(J.b,{exact:!0,path:"/add"},Object.keys(t).length>0||Be?l.a.createElement(qe,null):l.a.createElement(J.a,{to:"/login"})),l.a.createElement(J.b,{exact:!0,path:"/articles/:id"},Object.keys(t).length>0||Be?l.a.createElement(Me,null):l.a.createElement(J.a,{to:"/login"})),l.a.createElement(J.b,{exact:!0,path:"/articles/:id/edit"},Object.keys(t).length>0||Be?l.a.createElement(qe,null):l.a.createElement(J.a,{to:"/login"}))))})),Ve=Object(p.e)(V,Object(p.d)(Object(p.a)(d.a)));u.a.render(l.a.createElement(m.a,{store:Ve},l.a.createElement(ze,null)),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.06038602.chunk.js.map