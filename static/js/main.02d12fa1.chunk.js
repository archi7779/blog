(this["webpackJsonpblock-21"]=this["webpackJsonpblock-21"]||[]).push([[0],{229:function(e,t,a){e.exports=a(441)},237:function(e,t,a){},441:function(e,t,a){"use strict";a.r(t);var n,r,c,i,l=a(0),o=a.n(l),s=a(38),u=a.n(s),m=a(15),p=a(52),d=a(213),b=(a(237),a(149)),h=a(85),g=a(20),E=a(446),f=a(110),v=a(12),O=a.n(v),j=a(448),k=a(41),y=a.n(k),S=Object(j.a)("LOG_OUT"),x=Object(j.a)("USER_INFO_FROM_SERVER"),w=Object(j.a)("NET_ERR_TO_STATE"),T=Object(j.a)("SET_START_PAGING"),N=Object(j.a)("LOG_IN_REQUEST"),C=Object(j.a)("LOG_IN_SUCCESS"),A=Object(j.a)("LOG_IN_FAILURE"),L=Object(j.a)("REGISTRATION_IN_REQUEST"),R=Object(j.a)("REGISTRATION_SUCCESS"),_=Object(j.a)("REGISTRATION_FAILURE"),I=(Object(j.a)("GET_ARTICLES_FROM_SERVER"),Object(j.a)("GET_ARTICLES_FROM_SERVER")),P=Object(j.a)("UPDATE_POST_LIKE_STATUS"),q=function(e,t,a){return function(n){var r,c,i,l,o;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(r={headers:{Authorization:"Token ".concat(t)}},a){s.next=16;break}return s.prev=2,s.next=5,O.a.awrap(y.a.post("https://conduit.productionready.io/api/articles/".concat(e,"/favorite"),"",r));case 5:c=s.sent,i=c.data,n(P(i)),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(2),console.log(s.t0),s.t0.response.status&&alert("u need to login first");case 14:s.next=28;break;case 16:return s.prev=16,s.next=19,O.a.awrap(y.a.delete("https://conduit.productionready.io/api/articles/".concat(e,"/favorite"),r));case 19:l=s.sent,o=l.data,n(P(o)),s.next=28;break;case 24:s.prev=24,s.t1=s.catch(16),console.log(s.t1),s.t1.response.status&&alert("u need to login first");case 28:case"end":return s.stop()}}),null,null,[[2,10],[16,24]])}},F=Object(E.a)((n={},Object(g.a)(n,N,(function(){return"requested"})),Object(g.a)(n,A,(function(){return"failed"})),Object(g.a)(n,C,(function(){return"finished"})),n),"none"),M=Object(E.a)((r={},Object(g.a)(r,L,(function(){return"requested"})),Object(g.a)(r,_,(function(){return"failed"})),Object(g.a)(r,R,(function(){return"finished"})),r),"none"),G=Object(E.a)((c={},Object(g.a)(c,x,(function(e,t){var a=t.payload;return Object(h.a)({},a.user)})),Object(g.a)(c,S,(function(){return{}})),c),{}),U=Object(E.a)((i={},Object(g.a)(i,I,(function(e,t){var a=t.payload.data.articles;return Object(b.a)(a)})),Object(g.a)(i,P,(function(e,t){var a=t.payload.article,n=e.map((function(e){return e.slug===a.slug?a:e}));return Object(b.a)(n)})),i),[]),B=Object(E.a)(Object(g.a)({},T,(function(e,t){return t.payload||1})),1),z=Object(E.a)(Object(g.a)({},w,(function(e,t){var a=t.payload.data;return Object(h.a)({},a.errors)})),{}),V=Object(p.c)({user:G,loginState:F,registrationState:M,netError:z,articles:U,page:B}),D=a(40),J=a(23),Q=a(28),$=a(29),K=a(32),H=a(30),W=a(33),X=a(17),Y=a(447),Z=a(150),ee=a(24),te={doLogin:function(e){return function(t){var a;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(N()),n.prev=1,n.next=4,O.a.awrap(y.a.post("https://conduit.productionready.io/api/users/login",{user:e}));case 4:a=n.sent,t(C()),t(x(a.data)),document.cookie="authToken=".concat(a.data.user.token,"; path=/; max-age=86400; secure "),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),t(w(n.t0.response)),t(A());case 14:case"end":return n.stop()}}),null,null,[[1,10]])}}},ae=ee.object({email:ee.string().email().required("Please Enter your Email"),password:ee.string().required("Please Enter your password")}),ne=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.login,a=e.netError,n=e.doLogin;return o.a.createElement(X.d,{validateOnChange:!0,initialValues:{password:"",email:""},validationSchema:ae,onSubmit:function(e,t){var a=t.setSubmitting;a(!0),n(e),a(!1)}},(function(e){var n=e.errors;return o.a.createElement(o.a.Fragment,null,o.a.createElement(X.c,{className:"loginForm"},o.a.createElement(X.a,{name:"email",type:"input",as:Y.a,placeholder:"enter ur email",disabled:"requested"===t,className:n.email||Object.entries(a).length>0?"error":""}),n.email&&o.a.createElement("div",null,n.email),o.a.createElement(X.a,{name:"password",type:"password",as:Y.a,placeholder:"enter ur password",disabled:"requested"===t,className:n.password||Object.entries(a).length>0?"error":""}),n.password&&o.a.createElement("div",null,n.password),Object.entries(a).length>0&&o.a.createElement("div",null,"Email or Password incorrect"),o.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:"requested"===t,className:"subBut"},"Submit")))}))}}]),t}(o.a.Component),re=Object(m.b)((function(e){return{user:e.user,login:e.loginState,netError:e.netError}}),te)(ne),ce={doRegistration:function(e){return function(t){var a;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(L()),n.prev=1,n.next=4,O.a.awrap(y.a.post(" https://conduit.productionready.io/api/users",{user:e}));case 4:a=n.sent,t(R()),t(x(a.data)),document.cookie="authToken=".concat(a.data.user.token,"; path=/; max-age=86400; secure;"),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),t(w(n.t0.response)),t(_());case 14:case"end":return n.stop()}}),null,null,[[1,10]])}}},ie=ee.object({username:ee.string().required().max(50),email:ee.string().email().required("Please Enter your Email"),password:ee.string().required("Please Enter your password")}),le=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.doRegistration,a=e.registrationStatus,n=e.netError;return o.a.createElement(X.d,{validateOnChange:!0,initialValues:{username:"",email:"",password:""},validationSchema:ie,onSubmit:function(e,a){var n=a.setSubmitting;n(!0),t(e),n(!1)}},(function(e){var t=e.errors;return o.a.createElement(o.a.Fragment,null,o.a.createElement(X.c,{className:"loginForm"},o.a.createElement(X.a,{name:"username",type:"input",as:Y.a,placeholder:"enter ur login",disabled:"requested"===a,className:t.username||n.username?"error":""}),n.username&&o.a.createElement("div",null,n.username),t.username&&o.a.createElement("div",null,t.username),o.a.createElement(X.a,{name:"email",type:"input",as:Y.a,placeholder:"enter ur email",disabled:"requested"===a,className:t.email||n.email?"error":""}),n.email&&o.a.createElement("div",null,n.email),t.email&&o.a.createElement("div",null,t.email),o.a.createElement(X.a,{name:"password",type:"password",as:Y.a,placeholder:"enter ur password",disabled:"requested"===a,className:t.password||n.password?"error":""}),n.password&&n.password.map((function(e){return o.a.createElement("div",null,e)})),t.password&&o.a.createElement("div",null,t.password),o.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:"requested"===a,className:"subBut"},"Submit")))}))}}]),t}(o.a.Component),oe=Object(m.b)((function(e){return{user:e.user,registrationStatus:e.registrationState,netError:e.netError}}),ce)(le),se=a(443),ue=a(44),me=a(63),pe=a(64),de=a(444);function be(){var e=Object(me.a)(["\n  width: 500px;\n"]);return be=function(){return e},e}function he(){var e=Object(me.a)(["\n  width: 20px;\n  height: 35px;\n"]);return he=function(){return e},e}function ge(){var e=Object(me.a)([""]);return ge=function(){return e},e}function Ee(){var e=Object(me.a)([""]);return Ee=function(){return e},e}function fe(){var e=Object(me.a)([""]);return fe=function(){return e},e}function ve(){var e=Object(me.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-content: center;\n  background-color: #e5e5e5;\n  margin-top: 50px;\n  width: 500px;\n  cursor: pointer;\n"]);return ve=function(){return e},e}var Oe=pe.a.div(ve()),je=(pe.a.div(fe()),pe.a.div(Ee()),pe.a.div(ge()),pe.a.img(he()),Object(pe.a)(de.a)(be()));function ke(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):void 0}var ye=a(445),Se=a(14),xe={handleLike:q},we=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t,n){return function(r){r.stopPropagation(),(0,a.props.handleLike)(e,t,n)}},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,a=t.title,n=t.author,r=t.createdAt,c=t.favorited,i=t.favoritesCount,l=t.tagList,s=t.slug,u=t.body,m=e.token,p=Object(ye.a)(new Date(r),{includeSeconds:!0,addSuffix:!0});return o.a.createElement(je,{size:"small",title:a,extra:o.a.createElement("span",null,"created ",p)},o.a.createElement("div",{className:"ArticleMainSection"},o.a.createElement("span",{className:"ArticleMainSection-useProfile-userName"}," ",n.username),o.a.createElement("img",{src:n.image,alt:"userPhoto",className:"ArticleMainSection-useProfile-Img"}),o.a.createElement("p",{className:"Article-Body"},u)),o.a.createElement("div",{className:"ArticleLikeSection",onClick:this.handleClick(s,m,c)},c?o.a.createElement("label",{htmlFor:"imgTest"}," ",o.a.createElement(Se.a,{type:"heart",theme:"filled"}),i):o.a.createElement("label",{htmlFor:"imgTest2"}," ",o.a.createElement(Se.a,{type:"heart"}),i)),o.a.createElement("div",{className:"ArticleTagsSection"},l.map((function(e){return o.a.createElement("span",{key:Object(ue.uniqueId)()}," #",e)}))))}}]),t}(o.a.Component);we.defaultProps={token:"optional"};var Te=Object(m.b)((function(){return{}}),xe)(we),Ne={logOut:S,getArticles:function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return function(e){var t,r,c,i,l,o;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e(1===n?T():T(n)),10,t=1===n?"":"offset=".concat(10*(n-1)),r="?limit=".concat(10,"&").concat(t),c="https://conduit.productionready.io/api/articles".concat(r),"optional"!==a){s.next=18;break}return s.prev=6,s.next=9,O.a.awrap(y.a.get(c));case 9:return i=s.sent,e(I(i)),s.abrupt("return");case 14:return s.prev=14,s.t0=s.catch(6),console.log(s.t0),s.abrupt("return");case 18:return l={headers:{Authorization:"Token ".concat(a)}},s.prev=19,s.next=22,O.a.awrap(y.a.get(c,l));case 22:o=s.sent,e(I(o)),s.next=29;break;case 26:s.prev=26,s.t1=s.catch(19),console.log(s.t1);case 29:case"end":return s.stop()}}),null,null,[[6,14],[19,26]])}},cookieLogin:function(e){return function(t){var a,n;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t(N()),r.prev=1,a={headers:{Authorization:"Token ".concat(e)}},r.next=5,O.a.awrap(y.a.get("https://conduit.productionready.io/api/user",a));case 5:n=r.sent,t(C()),t(x(n.data)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0);case 13:case"end":return r.stop()}}),null,null,[[1,10]])}}},Ce=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){(0,a.props.logOut)()},a.hanglePrevClick=function(){var e=a.props,t=e.user.token,n=e.page,r=e.getArticles;1!==n&&r([t||"optional",n-1])},a.hangleNextClick=function(){var e=a.props,t=e.user.token,n=e.page;(0,e.getArticles)([t||"optional",n+1])},a.handleClick=function(e){var t=a.props.history,n="/articles/".concat(e.slug);t.push({pathname:n,state:e})},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user.token,a=e.page,n=e.getArticles,r=e.authToken;(0,e.cookieLogin)(r),n([t||"optional",a])}},{key:"render",value:function(){var e=this,t=this.props,a=t.articles,n=t.user,r=t.page;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mainPage"},o.a.createElement("div",null,n.username&&o.a.createElement("div",{className:"logInIndicator"},"u logged as ",n.username),o.a.createElement(Z.a,{type:"primary",onClick:this.hanglePrevClick,className:"MainPage-Prev-Button"},"Prev"),o.a.createElement("span",null,r),o.a.createElement(Z.a,{type:"primary",onClick:this.hangleNextClick,className:"MainPage-Next-Button"},"Next"),o.a.createElement(Z.a,{type:"primary",onClick:this.handleLogOut,className:"logOut"},"LogOut")),!a.length>0&&o.a.createElement(se.a,null),a.map((function(t){return o.a.createElement(Oe,{key:Object(ue.uniqueId)(),onClick:function(){e.handleClick(t)}},o.a.createElement(Te,{article:t,token:n.token}))}))))}}]),t}(o.a.Component);Ce.defaultProps={page:1,authToken:ke("authToken")?ke("authToken"):null};var Ae=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles,page:e.page}}),Ne)(Ce));function Le(e){var t=Object(X.e)(e),a=Object(f.a)(t,2),n=a[0],r=a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Y.a,Object.assign({},n,e)),r.error&&r.touched&&o.a.createElement("div",null,r.error))}var Re=ee.object().shape({title:ee.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),description:ee.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),body:ee.string().required("Required")}),_e={handleLike:q},Ie=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(K.a)(this,Object(H.a)(t).call(this,e))).state={},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user.token,n=t.location.state;return o.a.createElement(X.d,{validateOnChange:!0,initialValues:{title:n?n.title:"",description:n?n.description:"",body:n?n.body:"",tagList:n?n.tagList:[]},validationSchema:Re,onSubmit:function(t,n){var r=n.setSubmitting;r(!0);!function(){var n,r,c,i,l,o;O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=Object(ue.compact)(t.tagList),r=Object(h.a)({},t,{tagList:n}),c=e.props.history,i={headers:{Authorization:"Token ".concat(a)}},s.prev=4,s.next=7,O.a.awrap(y.a.post("https://conduit.productionready.io/api/articles",{article:r},i));case 7:l=s.sent,o="/articles/".concat(l.data.article.slug),c.push({pathname:o,state:l.data.article}),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(4),console.log(s.t0);case 15:case"end":return s.stop()}}),null,null,[[4,12]])}(),r(!1)}},(function(e){var t=e.values,a=e.isSubmitting;return o.a.createElement(o.a.Fragment,null,o.a.createElement(X.c,{className:"loginForm"},o.a.createElement(Le,{name:"title",placeholder:"enter article's title"}),o.a.createElement(Le,{name:"description",placeholder:"enter article's description"}),o.a.createElement(Le,{name:"body",placeholder:"enter article's body"}),o.a.createElement(X.b,{name:"tagList"},(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Le,{name:"tagList[0]",placeholder:"enter hashTag",key:0}),t.tagList.slice(1).map((function(e,t){return o.a.createElement(Le,{name:"tagList[".concat(t+1,"]"),placeholder:"enter hashTag",key:t})})),o.a.createElement(Z.a,{type:"primary",htmlType:"button",disabled:a,onClick:function(){return t.tagList[0]&&e.push()},className:"CreateNewArticle-addNewArticle-Button"},"add another hashTag"))})),o.a.createElement(Z.a,{type:"primary",htmlType:"submit",disabled:a,className:"CreateNewArticle-Submit-Button"},"Submit")))}))}}]),t}(o.a.Component);Ie.defaultProps={location:null};var Pe=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles}}),_e)(Ie)),qe={handleLike:q},Fe=function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(K.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t,n){return function(r){var c,i,l,o,s,u,m;return O.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r.stopPropagation(),c=a.props,i=c.handleLike,l=c.history,o=c.location.state,s=c.articles,p.next=4,O.a.awrap(i(e,t,n));case 4:u="/articles/".concat(o.slug),m=Object(ue.findIndex)(s,(function(t){return t.slug===e})),l.replace({pathname:u,state:s[m]});case 7:case"end":return p.stop()}}))}},a.handleEditClick=function(){var e=a.props,t=e.location.state,n=e.history,r="/articles/".concat(t.slug,"/edit");n.push({pathname:r,state:t})},a}return Object(W.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location.state,a=e.user,n=a.token,r=a.username,c=t.author.username,i=Object(ye.a)(new Date(t.createdAt),{includeSeconds:!0,addSuffix:!0});return o.a.createElement(je,{size:"small",title:t.title,extra:o.a.createElement("span",null,"created ",i)},o.a.createElement("div",{className:"ArticleMainSection"},o.a.createElement("img",{src:t.author.image,alt:"userPhoto",className:"ArticleMainSection-useProfile-Img"}),o.a.createElement("p",null,"author:",t.author.username),o.a.createElement("p",null,t.body)),o.a.createElement("div",{className:"ArticleLikeSection",onClick:this.handleClick(t.slug,n,t.favorited)},t.favorited?o.a.createElement("label",{htmlFor:"imgLike"}," ",o.a.createElement(Se.a,{type:"heart",theme:"filled"}),t.favoritesCount):o.a.createElement("label",{htmlFor:"imgLike2"}," ",o.a.createElement(Se.a,{type:"heart"}),t.favoritesCount)),o.a.createElement("div",{className:"ArticleTagsSection"},t.tagList.map((function(e){return o.a.createElement("span",{key:Object(ue.uniqueId)()}," #",e," ")}))),r===c&&o.a.createElement(Z.a,{onClick:this.handleEditClick},"edit"))}}]),t}(o.a.Component),Me=Object(J.f)(Object(m.b)((function(e){return{user:e.user,articles:e.articles}}),qe)(Fe));var Ge=function(){return o.a.createElement("ul",{className:"nav"},o.a.createElement("li",null,o.a.createElement(D.b,{to:"/login"},"Login")),o.a.createElement("li",null,o.a.createElement(D.b,{to:"/registration"},"Registration")),o.a.createElement("li",null,o.a.createElement(D.b,{to:"/"},"MainPage")),o.a.createElement("li",null,o.a.createElement(D.b,{to:"/add"},"Add Post")))},Ue=(a(440),ke("authToken"));var Be=Object(m.b)((function(e){return{user:e.user}}))((function(e){var t=e.user;return o.a.createElement(D.a,{basename:"/blog/"},o.a.createElement("div",{className:"App"},o.a.createElement(Ge,null),o.a.createElement(J.b,{exact:!0,path:"/login"},Object.keys(t).length>0||Ue?o.a.createElement(J.a,{to:"/"}):o.a.createElement(re,null)),o.a.createElement(J.b,{exact:!0,path:"/registration"},Object.keys(t).length>0||Ue?o.a.createElement(J.a,{to:"/"}):o.a.createElement(oe,null)),o.a.createElement(J.b,{exact:!0,path:"/"},o.a.createElement(Ae,null)),o.a.createElement(J.b,{exact:!0,path:"/add"},Object.keys(t).length>0||Ue?o.a.createElement(Pe,null):o.a.createElement(J.a,{to:"/login"})),o.a.createElement(J.b,{exact:!0,path:"/articles/:id"},Object.keys(t).length>0||Ue?o.a.createElement(Me,null):o.a.createElement(J.a,{to:"/login"})),o.a.createElement(J.b,{exact:!0,path:"/articles/:id/edit"},Object.keys(t).length>0||Ue?o.a.createElement(Pe,null):o.a.createElement(J.a,{to:"/login"}))))})),ze=Object(p.e)(V,Object(p.d)(Object(p.a)(d.a)));u.a.render(o.a.createElement(m.a,{store:ze},o.a.createElement(Be,null)),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.02d12fa1.chunk.js.map